<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="pro3.css"></link>
    <title>student tables</title>
<script src="jquery-3.6.0.min.js"></script>
    <script type="text/javascript">
    var assnum = 6;//Assignmentnumber
    function addcol(){// to add a colum

      var rowlength =  document.getElementById("tab").rows.length;// gets the legth of rows
      assnum++;// increases the Assignmentnumber
      $("#res0").before("<th> Assignment "+assnum+"");
      for (var i = 1; i <= 30;i++) {
      $("#res"+i+"").before("<td contenteditable=\"true\"id = \""+i+"\">-</td>");//
      }
      update();
    }
    //i need to get table row counter figer out how focus blure work  and update the color of resuts respencivly
    function update(){
      $("td").focus(function(){
        $(this).css("background-color", "yellow");
      });

      $("td").blur(function(){

        $(this).css("background-color", "inherit");// to set back to color
        var finalgrade =0;// to add up the finai; results
        var currow = parseInt($(this).attr("id"));// row thats clicked on
        var rowlength =  document.getElementById("tab").rows.length;
        var cellslength = document.getElementById("tab").rows[0].cells.length;
        var number = 0;//numbersfor adverages

        for(i = 2;i<cellslength;i++){
          var rowdata = parseInt(document.getElementById("tab").rows[currow].cells[i].innerHTML);// gets datda from currnt row
          if(!isNaN(rowdata)){// cheacks if data is valid to be passed into a int
        finalgrade += rowdata;
        number++;
      }
      var average = finalgrade/number;//gets a resuts
    }
        var subcount = 0;//sub count
        // to count the empty spaces
        for(i = 1;i<rowlength;i++){
          for(j =2;j<cellslength-1;j++){
          var rowdata = document.getElementById("tab").rows[i].cells[j].innerHTML;//complies
          if(rowdata == "-"){// empty spaces
            subcount++;
      }
    }
  }
        if(!isNaN( Math.round(average))&& parseInt(this.innerHTML) <=100&& parseInt(this.innerHTML) >=0){
          document.getElementById("res"+currow+"").innerHTML = Math.round(average)+"%";//sets in adverage
          $("p").text("Unsubmitted = "+subcount);
          if(average <60){// pass rate
          $("#res"+currow+"").css("background-color","red");
          $("#res"+currow+"").css("color","white");
        }else {
          $("#res"+currow+"").css("background-color","inherit");
          $("#res"+currow+"").css("color","black");
        }
        }else {
          this.innerHTML = "-";// sets back to default
        }
      });
    }
      var num = 5;// numbers for row id

      function rowadd(){// function fro adding rows
        var cnum =parseInt( document.getElementById("tab").rows[0].cells.length);//coloum number
        num++;// incrase row id number
        var rowd = "<tr ><td>name</td><td>123</td> ";// row data to be added
                for (var i = 2; i < cnum-1; i++) {// to loop so that it accoutns for added coloms
                  rowd+="<td contenteditable=\"true\"id =\""+num+"\">-</td>";
                }
                rowd +="</td> <td id =\"res"+num+"\">-</td>"
                rowd +="</tr>";

        $("#atbodyrow1").append(rowd);
        update();
      }
      function toggletable(){
        $("#grade").toggle();
      }
      function delrow(){
        $("tr:nth-child()").remove();
      }
    </script>

  </head>
  <body>
    <button onclick="rowadd()">add row</button>
    <button onclick="addcol()"> add colum</button>
    <button onclick="toggletable()">final results</button>
    <table id = "tab">

    <theadid = "athead" >
      <tr>
      <th>Name</th><th>ID</th> <th>Assignment	1</th> <th>Assignment	2</th> <th>Assignment	3</th>
      <th>Assignment	4</th> <th>Assignment	5</th><th id ="res0">results</th>
      </tr>
    </thead>


    <tbody  id = "atbodyrow1">
      <tr >
        <td>name</td><td>123</td>
        <td contenteditable="true" id = "1">-</td>
        <td contenteditable="true"id = "1">-</td>
        <td contenteditable="true"id = "1">-</td>
        <td contenteditable="true"id = "1">-</td>
        <td contenteditable="true"id = "1">-</td>
        <td id = "res1">-</td>
      </tr>
      <tr>
        <td>name</td><td>123</td>
        <td contenteditable="true"id = "2">-</td>
        <td contenteditable="true"id = "2">-</td>
        <td contenteditable="true"id = "2">-</td>
        <td contenteditable="true"id = "2">-</td>
        <td contenteditable="true"id = "2">-</td>
        <td id ="res2">-</td>
      </tr>
      <tr >
        <td>name</td><td>123</td>
        <td contenteditable="true" id = "3">-</td>
        <td contenteditable="true"id = "3">-</td>
        <td contenteditable="true"id = "3">-</td>
        <td contenteditable="true"id = "3">-</td>
        <td contenteditable="true"id = "3">-</td>
        <td id = "res3">-</td>
      </tr>
      <tr>
        <td>name</td><td>123</td>
        <td contenteditable="true"id = "4">-</td>
        <td contenteditable="true"id = "4">-</td>
        <td contenteditable="true"id = "4">-</td>
        <td contenteditable="true"id = "4">-</td>
        <td contenteditable="true"id = "4">-</td>
        <td id ="res4">-</td>
      </tr>
      <td>name</td><td>123</td>
      <td contenteditable="true"id = "5">-</td>
      <td contenteditable="true"id = "5">-</td>
      <td contenteditable="true"id = "5">-</td>
      <td contenteditable="true"id = "5">-</td>
      <td contenteditable="true"id = "5">-</td>
      <td id ="res5">-</td>
    </tr>
    </tbody>
</table >
  <table id = "grade">
    <thead>
      <tr>
        <th>Percent Grade</th>
        <th>Letter Grade</th>
        <th>4.0 Scale</th>
      </tr>
    </thead>
    <tbody>
      <tr>
      <td> 93-100 </td>
      <td>  A  </td>
      <td> 4.0 </td>
    </tr>
    <tr>
    <td> 90-92 </td>
    <td>  A-  </td>
    <td> 3.7 </td>
  </tr>
  <tr>
  <td> 87-89 </td>
  <td>  B+  </td>
  <td> 3.3 </td>
</tr>
<tr>
<td> 83-86 </td>
<td>  B  </td>
<td> 3.0 </td>
</tr>
<tr>
<td> 80-82 </td>
<td>  B-  </td>
<td> 2.7 </td>
</tr>
<tr>
<td> 77-79 </td>
<td>  C+  </td>
<td> 2.3 </td>
</tr>
<tr>
<td> 87-89 </td>
<td>  C  </td>
<td> 2.0 </td>
</tr>
<tr>
<td> 70-72 </td>
<td>  C-  </td>
<td> 1.7 </td>
</tr>
<tr>
<td> 67-69 </td>
<td>  D+  </td>
<td> 1.3 </td>
</tr>
<tr>
<td> 83-83 </td>
<td>  D  </td>
<td> 1.0 </td>
</tr>
<tr>
<td> 60-62 </td>
<td>  D-  </td>
<td> 0.7 </td>
</tr>
<tr>
<td> <60 </td>
<td>  F  </td>
<td> 0.0 </td>
</tr>
      <td></td>
    </tbody>
  </table>
  <p>Unsubmitted = 25</p>
<script type="text/javascript">
  $(document).ready(function(){
    update();
    $("#grade").hide();
  });
</script>
  </body>
</html>
